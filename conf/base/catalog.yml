# Here you can define all your data sets by using simple YAML syntax.
#
# Documentation for this file format can be found in "The Data Catalog"
# Link: https://docs.kedro.org/en/stable/data/data_catalog.html

# raw dataset definitions
raw_census_population:
  layer: raw
  type: api.APIDataSet
  url: http://api.census.gov/data/2021/pep/population
  params:
    get: "NAME,LASTUPDATE,STATE,POP_2021"
    for: "state:*"

raw_airports:
  layer: raw
  type: polars.CSVDataSet
  filepath: data/01_raw/us-airlines-domestic-departure-dataset/Stations.csv
  load_args:
    separator: ","

raw_carriers:
  layer: raw
  type: polars.CSVDataSet
  filepath: data/01_raw/us-airlines-domestic-departure-dataset/Carriers.csv
  load_args:
    separator: ","

raw_flights:
  layer: raw
  type: polars.CSVDataSet
  filepath: data/01_raw/us-airlines-domestic-departure-dataset/CompleteData.csv
  load_args:
    separator: ","

raw_weather_codes:
  layer: raw
  type: polars.CSVDataSet
  filepath: data/01_raw/us-airlines-domestic-departure-dataset/ActiveWeather.csv
  load_args:
    separator: ","

raw_cancellation_codes:
  layer: raw
  type: polars.CSVDataSet
  filepath: data/01_raw/us-airlines-domestic-departure-dataset/Cancellation.csv
  load_args:
    separator: ","

# transformed dataset definitons
census_population_transformed:
  layer: intermediate
  type: polars.CSVDataSet
  filepath: data/02_intermediate/us_census_population.csv

airports_transformed:
  layer: intermediate
  type: polars.CSVDataSet
  filepath: data/02_intermediate/airports.csv
  load_args:
    separator: ","

flights_transformed:
  layer: intermediate
  type: IncrementalDataSet
  path: data/02_intermediate/flights
  dataset: pandas.ParquetDataSet
  filename_suffix: ".parquet"
  load_args:
    use_nullable_dtypes: true
    engine: pyarrow

# validated datasets
census_population_validated:
  layer: primary
  type: polars.CSVDataSet
  filepath: data/03_primary/us_census_population.csv
  load_args:
    separator: ","

airports_validated:
  layer: primary
  type: polars.CSVDataSet
  filepath: data/03_primary/airports.csv
  load_args:
    separator: ","

flights_validated:
  layer: primary
  type: IncrementalDataSet
  path: data/03_primary/flights
  dataset: pandas.ParquetDataSet
  filename_suffix: ".parquet"
  load_args:
    use_nullable_dtypes: true
    engine: pyarrow
  # checkpoint:
  #   filepath: data/03_primary/flights/checkpoint
